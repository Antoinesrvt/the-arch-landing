---
import I18nLayout from '../../layouts/I18nLayout.astro';
import Header from '../../components/Header.astro';
import I18nHero from '../../components/I18nHero.astro';
import HybridApproach from '../../components/HybridApproach.astro';
import Services from '../../components/Services.astro';
import ServicesOptionA from '../../components/ServicesOptionA.astro';
import ServicesOptionB from '../../components/ServicesOptionB.astro';
import ServicesOptionC from '../../components/ServicesOptionC.astro';
import Founders from '../../components/Founders.astro';
import Network from '../../components/Network.astro';
import Guests from '../../components/Guests.astro';
import MediaCommunity from '../../components/MediaCommunity.astro';
import CaseStudies from '../../components/CaseStudies.astro';
import Contact from '../../components/Contact.astro';
import Footer from '../../components/Footer.astro';
import ClientScripts from '../../components/ClientScripts.astro';
import { useTranslations, getStaticPaths } from '../../i18n/utils';
import type { Language, TranslationFunction } from '../../types';

export { getStaticPaths };

const { lang } = Astro.params;
const typedLang = lang as Language;
const t = useTranslations(typedLang) as TranslationFunction;
---

<I18nLayout 
  lang={typedLang}
  title={t('hero.title')}
  description={t('hero.subtitle')}
>
  <Header currentLang={typedLang} />
  
  <!-- Main Content -->
  <main id="main-content">
    <I18nHero lang={typedLang} />
    <HybridApproach lang={typedLang} />
    
    <!-- Services Design Selector -->
    <div class="relative py-12 bg-gradient-to-b from-slate-900/50 to-transparent">
      <div class="container mx-auto px-6">
        <div class="flex flex-col items-center gap-6 mb-8">
          <div class="text-center">
            <h3 class="text-2xl font-bold text-white mb-2">üé® {typedLang === 'fr' ? 'Choisissez votre design pr√©f√©r√©' : 'Choose your preferred design'}</h3>
            <p class="text-gray-400 text-sm">{typedLang === 'fr' ? 'Cliquez sur un design pour le s√©lectionner' : 'Click on a design to select it'}</p>
          </div>
          
          <div class="flex flex-wrap gap-4 justify-center">
            <button
              id="show-option-current"
              class="design-selector-btn active px-6 py-3 bg-purple-600 border-2 border-purple-500 text-white font-bold rounded-xl hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-purple-500/50"
            >
              {typedLang === 'fr' ? 'üìç Design Actuel' : 'üìç Current Design'}
            </button>
            <button
              id="show-option-a"
              class="design-selector-btn px-6 py-3 bg-white/5 border-2 border-white/20 text-gray-300 font-bold rounded-xl hover:scale-105 transition-all duration-300 hover:border-indigo-500/50"
            >
              {typedLang === 'fr' ? 'üåä Option A: Fluid Orbit' : 'üåä Option A: Fluid Orbit'}
            </button>
            <button
              id="show-option-b"
              class="design-selector-btn px-6 py-3 bg-white/5 border-2 border-white/20 text-gray-300 font-bold rounded-xl hover:scale-105 transition-all duration-300 hover:border-indigo-500/50"
            >
              {typedLang === 'fr' ? 'üçØ Option B: Hexagonal' : 'üçØ Option B: Hexagonal'}
            </button>
            <button
              id="show-option-c"
              class="design-selector-btn px-6 py-3 bg-white/5 border-2 border-white/20 text-gray-300 font-bold rounded-xl hover:scale-105 transition-all duration-300 hover:border-indigo-500/50"
            >
              {typedLang === 'fr' ? 'üåä Option C: Wave Layout' : 'üåä Option C: Wave Layout'}
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- All Services Sections -->
    <div id="services-current" class="services-section">
      <Services lang={typedLang} />
    </div>
    
    <div id="services-option-a" class="services-section hidden">
      <ServicesOptionA lang={typedLang} />
    </div>
    
    <div id="services-option-b" class="services-section hidden">
      <ServicesOptionB lang={typedLang} />
    </div>
    
    <div id="services-option-c" class="services-section hidden">
      <ServicesOptionC lang={typedLang} />
    </div>

    <Founders lang={typedLang} />
    <Network lang={typedLang} />
    <Guests lang={typedLang} />
    <MediaCommunity lang={typedLang} />
    <!-- <CaseStudies lang={typedLang} /> -->
    <Contact lang={typedLang} />
  </main>

  <!-- Design Selector Script -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const buttons = document.querySelectorAll('.design-selector-btn');
      const sections = document.querySelectorAll('.services-section');
      
      buttons.forEach(button => {
        button.addEventListener('click', () => {
          // Remove active class from all buttons
          buttons.forEach(btn => {
            btn.classList.remove('active', 'bg-purple-600', 'border-purple-500', 'shadow-purple-500/50');
            btn.classList.add('bg-white/5', 'border-white/20', 'text-gray-300');
          });
          
          // Add active class to clicked button
          button.classList.add('active', 'bg-purple-600', 'border-purple-500', 'shadow-purple-500/50');
          button.classList.remove('bg-white/5', 'border-white/20');
          
          // Hide all sections
          sections.forEach(section => section.classList.add('hidden'));
          
          // Show selected section
          const targetId = button.id.replace('show-', 'services-');
          const targetSection = document.getElementById(targetId);
          if (targetSection) {
            targetSection.classList.remove('hidden');
            
            // Smooth scroll to the section
            setTimeout(() => {
              targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
          }
        });
      });
    });
  </script>

  <Footer lang={typedLang} />
  
  <!-- Client-side scripts using proper Astro + TypeScript approach -->
  <ClientScripts currentLang={typedLang} />
</I18nLayout>
